<form method="POST"
    action="/api/posts/paid?lang=<%= obj.type %>&doc=<%= obj.caption %>&id=<%= obj.client.id %>&docid=<%= docid %>"
    id="paid_form">
    <div class="form-group">
        <h8 class="m-0 font-weight-bold text-secondary"></h8>
        <div class="form-group col">
            <!-- <label for="paid_list">Clients paid history</label> -->
            <select class="mdb-select md-form" searchable="Search here.." id="paid_list">
                <option value="" disabled selected>Select from Pre Clients paid ....</option>
                <!-- <select class="form-control form-control-xs selectpicker" name="" data-live-search="true" data-title="Language"
            id="paid_list" data-width="100%"> -->
                <!-- <option value="" selected>Client Select ...</option> -->
                <%  if(locals.clientname && typeof clientname != 'undefined') { %>
                <% for (var x = 0; x < clientname.length; x++) { %>
                <option value="<%= clientname[x]['_id'] %>"><%= clientname[x]['fullname'] %></option>
                <% } %>
                <%}%>
        </select>
    </div>
</div>
<div class="form-group">
    <div class="form-row">
        <div class="form-group col">
            <input type="text" class="form-control" name="first" id="first" placeholder="First Name" value="<%= %>"
                required>
        </div>
        <div class="form-group col">
            <input type="text" class="form-control" name="middle" id="middle" placeholder="Middle Name" value="<%= %>"
                required>
        </div>
        <div class="form-group col">
            <input type="text" class="form-control" name="last" id="last" placeholder="Last Name" value="<%= %>"
                required>
        </div>
    </div>
    </div>
    <div class="form-group">
        <div class="form-row">
            <div class="form-group col">
                <input type="text" class="form-control" name="address" id="address" placeholder="Address"
                    value="<%= %>">
            </div>
            <div class="form-group col">
                <input type="text" class="form-control" name="phone" id="phone" placeholder="Phone" value="<%= %>"
                    required>
            </div>
            <!-- <div class="form-group col">
            <input type="text" class="form-control" name="no" id="no" placeholder="<%=  %>" value="<%= %>">
        </div> -->
        </div>
    </div>
    <div class="form-group">
        <div class="form-row">
            <div class="form-group col">
                <input type="text" class="form-control" name="type" id="type" placeholder="Type" value="<%= %>">
            </div>
            <div class="form-group col">
                <input type="text" class="form-control" name="paid" id="paid" placeholder="Paid" value="<%= %>">
            </div>
            <div class="form-group col">
                <input type="text" class="form-control" name="remain" id="remain" placeholder="Remain" value="<%= %>">
            </div>
        </div>
    </div>
    <br>
    <div class="btn-group" role="group" aria-label="Basic example">
        <button type="submit" name="submit" class="btn btn-primary">Submit</button>
        <button style="display: none;" name="clear" id="clear" class="btn btn-secondary">clear </button>
    </div>
</form>


<script>

    $("#clear").click(function () {
        $('#clear').hide();
        $("#paid_form").closest('form').find("input[type=text], textarea").val("");
    });


    $("#paid_list").on('change', function () {
        $('#clear').show();
        var paid = $("paid_list").val();
        var g = document.getElementById("paid_list");
        var strPaidClient = g.options[g.selectedIndex].value;

        var first = $("first").val();
        var middle = $("middle").val();
        var last = $("last").val();
        var address = $("address").val();
        var phone = $("phone").val();
        var remain = $("remain").val();
        var paid = $("paid").val();
        var type = $("type").val();



        $.ajax({
            url: '/api/posts/clientpaidselect',
            type: 'POST',
            dataType: "json",
            cache: true,
            data: { first: first, middle: middle, last: last, address: address, phone: phone, remain: remain, paid: paid, type: type, client: strPaidClient },
            success: function (fixtures) {
                //toastr["success"]("Payment succefully inserted", "Payment saved")
            },
            error: function (jqXHR, textStatus, err) {
                //alert('text status ' + textStatus + ', err ' + err)
                //toastr["error"]("Payment not inserted", "Payment error")
            }
        })

    });


    $("#paid_form").submit(function (event) {
        event.preventDefault(); //prevent default action 
        var post_url = $(this).attr("action"); //get form action url
        var request_method = $(this).attr("method"); //get form GET/POST method
        var form_data = $(this).serialize(); //Encode form elements for submission



        $.ajax({
            url: post_url,
            type: request_method,
            data: form_data,
            success: function (result) {
                if (result == "success")
                    toastr["success"]("Payment succefully inserted", "Payment saved")
                else
                    toastr["error"]("Payment not inserted", "Payment error")
                //$("#download").html(result);
                // $("#download").show();
                // $("#download").attr("href", result['link']);
                // $('#paid').html(result['paid']);
            }
        });
    });



    $(document).ready(function () {
        $('#paid_list').materialSelect();
    });
</script>